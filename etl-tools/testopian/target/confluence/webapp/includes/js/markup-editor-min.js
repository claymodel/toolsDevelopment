AJS.Editor.Markup={storeTextareaBits:function(b,a,f){if(a.selectionStart!=null){a.sel=a.value.substr(a.selectionStart,a.selectionEnd-a.selectionStart);a.sel1=a.value.substr(0,a.selectionStart);a.sel2=a.value.substr(a.selectionEnd);b.selectedText.value=a.sel}else{if(document.selection&&document.selection.createRange){try{!f&&b.elements[AJS.params.parametersName].focus()}catch(d){}var c=document.selection.createRange();a.caretPos=c.duplicate();b.selectedText.value=c.text}}return b.selectedText.value},insertOrUpdateText:function(c,a){if(window.getSelection&&a.selectionStart&&a.selectionStart!=null){a.value=a.sel1+c+a.sel2;a.focus();a.selectionStart=a.selectionEnd=a.sel1.length+c.length}else{if(a.createTextRange&&a.caretPos){var b=a.caretPos;b.text=b.text.charAt(b.text.length-1)==" "?c+" ":c}else{a.value+=c}}}};