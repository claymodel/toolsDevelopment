AJS.toInit(function(a){if(!a("#add-labels-form").length){return}a(".show-labels-editor").click(function(){AJS.safe.ajax({url:AJS.params.contextPath+"/json/suggestlabelsactivity.action",data:{entityIdString:AJS.params.pageId},success:AJS.Labels.suggestedLabelsCallback,error:AJS.Labels.suggestedLabelsErrorHandler,dataType:"json"});a("#labelsString").val("");a("#labels-section").addClass("open");AJS.setVisible(".show-labels-editor",false);AJS.setVisible("a.hide-labels-editor",true);a("#labelsString").get(0).focus();return false});a(".hide-labels-editor").click(function(){AJS.Labels.labelOperationError("");a("#errorSpan").html("");a("#labels-section").removeClass("open");AJS.Labels.addLabelFromInput();AJS.setVisible("a.hide-labels-editor",false);AJS.setVisible(".show-labels-editor",true);if(a("#labelsList").children().length==0&&a("#labelsString").val()==""){AJS.setVisible("#labels-section-title-none",true)}else{AJS.setVisible("#labels-section-title-none",false)}return false});a("#add-labels-form").submit(AJS.Labels.addLabelFromInput);a(".labels-editor .add-labels").click(AJS.Labels.addLabelFromInput);a(".labels-editor .remove-label").click(AJS.Labels.removeLabel);a("#labelsString").keydown(function(b){if(b.which==13&&!AJS.dropDown.current){AJS.Labels.addLabelFromInput();AJS.setVisible("#labels-section-title-none",false);return AJS.stopEvent(b)}})});