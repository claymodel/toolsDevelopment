(function(c){var d=function(e){AJS.$(e).slideUp(function(){AJS.$(e).remove()})};var b=function(g,f,e){c.getJSON(AJS.params.contextPath+"/pages/movepage.action",{pageId:g,position:e,targetId:f},a)};var a=function(f){var e="";if(f.actionErrors&&f.actionErrors.length){e=f.actionErrors.join("<br>");AJS.log("ajax parameters invalid : "+e)}c("#resultsDiv").html(e)};AJS.toInit(function(f){var e=f("#tree-div").tree({url:AJS.params.contextPath+"/pages/children.action",initUrl:AJS.params.contextPath+"/pages/children.action?spaceKey="+encodeURIComponent(AJS.params.spaceKey)+"&node=root",parameters:["pageId"],nodeId:"pageId",drop:function(){function h(){if(arguments.length==1&&arguments[0][0]=="#"){var i=arguments[0].substring(1,7);if(i.length==3){i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]}this.R=parseInt(i.substring(0,2),16);this.G=parseInt(i.substring(2,4),16);this.B=parseInt(i.substring(4),16)}else{if(arguments.length==3){this.R=parseInt(arguments[0],10);this.G=parseInt(arguments[1],10);this.B=parseInt(arguments[2],10)}else{return false}}this.toString=function(){return"#"+this.R.toString(16)+this.G.toString(16)+this.B.toString(16)}}var g=function(l){var i=new h("#d8e4f1"),n=new h("#fff"),o=i.R,p=n.R-i.R,q=i.G,k=n.G-i.G,j=i.B,m=n.B-i.B;return{start:0,end:1,animate:function(r){l.style.backgroundColor=new h(o+p*r,q+k*r,j+m*r)},onFinish:function(){l.style.backgroundColor=""}}};AJS.animation.add(g(this.source));AJS.animation.duration=500;AJS.animation.start();b(this.source.pageId,this.target.pageId,this.position)},order:function(){var g=this.source.pageId;f.getJSON(AJS.params.contextPath+"/pages/revertpageorder.action",{pageId:g},a)},orderUndo:function(){var g=this.source.pageId;var h=jQuery.map(this.orderedChildren,function(i){return i.pageId}).join();f.getJSON(AJS.params.contextPath+"/pages/setpageorder.action",{pageId:g,orderedChildIds:h},a)},onready:function(){if(!AJS.params.expandedNodes){AJS.params.expandedNodes=[]}if(AJS.params.openId){var k=function(){e.findNodeBy("pageId",AJS.params.openId).highlight()}}var g=[];for(var h=0,j=AJS.params.expandedNodes.length;h<j;h++){g[h]={pageId:AJS.params.expandedNodes[h]}}e.expandPath(g.reverse(),k)}})})})(AJS.$);