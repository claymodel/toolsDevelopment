var Effect={tagifyText:function(a){var b="position:relative";if(/MSIE/.test(navigator.userAgent)){b+=";zoom:1"}a=$(a);$A(a.childNodes).each(function(c){if(c.nodeType==3){c.nodeValue.toArray().each(function(d){a.insertBefore(Builder.node("span",{style:b},d==" "?String.fromCharCode(160):d),c)});Element.remove(c)}})},multiple:function(c,d){var f;if(((typeof c=="object")||(typeof c=="function"))&&(c.length)){f=c}else{f=$(c).childNodes}var b=Object.extend({speed:0.1,delay:0},arguments[2]||{});var e=b.speed;var a=b.delay;$A(f).each(function(h,g){new d(h,Object.extend(b,{delay:a+g*e}))})}};var Effect2=Effect;Effect.Transitions={};Effect.Transitions.linear=function(a){return a};Effect.Transitions.sinoidal=function(a){return(-Math.cos(a*Math.PI)/2)+0.5};Effect.Transitions.reverse=function(a){return 1-a};Effect.Transitions.flicker=function(a){return((-Math.cos(a*Math.PI)/4)+0.75)+Math.random()/4};Effect.Transitions.wobble=function(a){return(-Math.cos(a*Math.PI*(9*a))/2)+0.5};Effect.Transitions.pulse=function(a){return(Math.floor(a*10)%2==0?(a*10-Math.floor(a*10)):1-(a*10-Math.floor(a*10)))};Effect.Transitions.none=function(a){return 0};Effect.Transitions.full=function(a){return 1};Effect.Queue={effects:[],interval:null,add:function(a){var b=new Date().getTime();switch(a.options.queue){case"front":this.effects.findAll(function(c){return c.state=="idle"}).each(function(c){c.startOn+=a.finishOn;c.finishOn+=a.finishOn});break;case"end":b=this.effects.pluck("finishOn").max()||b;break}a.startOn+=b;a.finishOn+=b;this.effects.push(a);if(!this.interval){this.interval=setInterval(this.loop.bind(this),40)}},remove:function(a){this.effects=this.effects.reject(function(b){return b==a});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){var a=new Date().getTime();this.effects.invoke("loop",a)}};Effect.Base=function(){};Effect.Base.prototype={position:null,setOptions:function(a){this.options=Object.extend({transition:Effect.Transitions.sinoidal,duration:1,fps:25,sync:false,from:0,to:1,delay:0,queue:"parallel"},a||{})},start:function(a){this.setOptions(a||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.event("beforeStart");if(!this.options.sync){Effect.Queue.add(this)}},loop:function(c){if(c>=this.startOn){if(c>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish");return}var b=(c-this.startOn)/(this.finishOn-this.startOn);var a=Math.round(b*this.options.fps*this.options.duration);if(a>this.currentFrame){this.render(b);this.currentFrame=a}}},render:function(a){if(this.state=="idle"){this.state="running";this.event("beforeSetup");if(this.setup){this.setup()}this.event("afterSetup")}if(this.options.transition){a=this.options.transition(a)}a*=(this.options.to-this.options.from);a+=this.options.from;this.position=a;this.event("beforeUpdate");if(this.update){this.update(a)}this.event("afterUpdate")},cancel:function(){if(!this.options.sync){Effect.Queue.remove(this)}this.state="finished"},event:function(a){if(this.options[a+"Internal"]){this.options[a+"Internal"](this)}if(this.options[a]){this.options[a](this)}}};Effect.Parallel=Class.create();Object.extend(Object.extend(Effect.Parallel.prototype,Effect.Base.prototype),{initialize:function(a){this.effects=a||[];this.start(arguments[1])},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1);b.cancel();b.event("beforeFinish");if(b.finish){b.finish(a)}b.event("afterFinish")})}});Effect.Opacity=Class.create();Object.extend(Object.extend(Effect.Opacity.prototype,Effect.Base.prototype),{initialize:function(b){this.element=$(b);if(/MSIE/.test(navigator.userAgent)&&(!this.element.hasLayout)){this.element.style.zoom=1}var a=Object.extend({from:Element.getOpacity(this.element)||0,to:1},arguments[1]||{});this.start(a)},update:function(a){Element.setOpacity(this.element,a)}});Effect.MoveBy=Class.create();Object.extend(Object.extend(Effect.MoveBy.prototype,Effect.Base.prototype),{initialize:function(b,a,c){this.element=$(b);this.toTop=a;this.toLeft=c;this.start(arguments[3])},setup:function(){Element.makePositioned(this.element);this.originalTop=parseFloat(Element.getStyle(this.element,"top")||"0");this.originalLeft=parseFloat(Element.getStyle(this.element,"left")||"0")},update:function(a){var c=this.toTop*a+this.originalTop;var b=this.toLeft*a+this.originalLeft;this.setPosition(c,b)},setPosition:function(b,a){this.element.style.top=b+"px";this.element.style.left=a+"px"}});Effect.Scale=Class.create();Object.extend(Object.extend(Effect.Scale.prototype,Effect.Base.prototype),{initialize:function(b,c){this.element=$(b);var a=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:c},arguments[2]||{});this.start(a)},setup:function(){var a=this;this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=Element.getStyle(this.element,"position");a.originalStyle={};["top","left","width","height","fontSize"].each(function(c){a.originalStyle[c]=a.element.style[c]});this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var b=Element.getStyle(this.element,"font-size")||"100%";["em","px","%"].each(function(c){if(b.indexOf(c)>0){a.fontSize=parseFloat(b);a.fontSizeType=c}});this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box"){this.dims=[this.element.clientHeight,this.element.clientWidth]}if(this.options.scaleMode=="content"){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}if(!this.dims){this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}},update:function(a){var b=(this.options.scaleFrom/100)+(this.factor*a);if(this.options.scaleContent&&this.fontSize){this.element.style.fontSize=this.fontSize*b+this.fontSizeType}this.setDimensions(this.dims[0]*b,this.dims[1]*b)},finish:function(a){if(this.restoreAfterFinish){var b=this;["top","left","width","height","fontSize"].each(function(c){b.element.style[c]=b.originalStyle[c]})}},setDimensions:function(a,e){var d=this.element.style;if(this.options.scaleX){d.width=e+"px"}if(this.options.scaleY){d.height=a+"px"}if(this.options.scaleFromCenter){var c=(a-this.dims[0])/2;var b=(e-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){d.top=this.originalTop-c+"px"}if(this.options.scaleX){d.left=this.originalLeft-b+"px"}}else{if(this.options.scaleY){d.top=-c+"px"}if(this.options.scaleX){d.left=-b+"px"}}}}});Effect.Highlight=Class.create();Object.extend(Object.extend(Effect.Highlight.prototype,Effect.Base.prototype),{initialize:function(b){this.element=$(b);var a=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(a)},setup:function(){this.oldBgImage=this.element.style.backgroundImage;this.element.style.backgroundImage="none";if(!this.options.endcolor){this.options.endcolor=Element.getStyle(this.element,"background-color").parseColor("#ffffff")}if(typeof this.options.restorecolor=="undefined"){this.options.restorecolor=this.element.style.backgroundColor}this.colors_base=[parseInt(this.options.startcolor.slice(1,3),16),parseInt(this.options.startcolor.slice(3,5),16),parseInt(this.options.startcolor.slice(5),16)];this.colors_delta=[parseInt(this.options.endcolor.slice(1,3),16)-this.colors_base[0],parseInt(this.options.endcolor.slice(3,5),16)-this.colors_base[1],parseInt(this.options.endcolor.slice(5),16)-this.colors_base[2]]},update:function(a){var c=this;var b=$R(0,2).map(function(d){return Math.round(c.colors_base[d]+(c.colors_delta[d]*a))});this.element.style.backgroundColor="#"+b[0].toColorPart()+b[1].toColorPart()+b[2].toColorPart()},finish:function(){this.element.style.backgroundColor=this.options.restorecolor;this.element.style.backgroundImage=this.oldBgImage}});Effect.ScrollTo=Class.create();Object.extend(Object.extend(Effect.ScrollTo.prototype,Effect.Base.prototype),{initialize:function(a){this.element=$(a);this.start(arguments[1]||{})},setup:function(){Position.prepare();var b=Position.cumulativeOffset(this.element);var a=window.innerHeight?window.height-window.innerHeight:document.body.scrollHeight-(document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight);this.scrollStart=Position.deltaY;this.delta=(b[1]>a?a:b[1])-this.scrollStart},update:function(a){Position.prepare();window.scrollTo(Position.deltaX,this.scrollStart+(a*this.delta))}});Effect.Fade=function(c){var a=Element.getInlineOpacity(c);var b=Object.extend({from:Element.getOpacity(c)||1,to:0,afterFinishInternal:function(d){if(d.options.to==0){Element.hide(d.element);Element.setInlineOpacity(d.element,a)}}},arguments[1]||{});return new Effect.Opacity(c,b)};Effect.Appear=function(b){var a=Object.extend({from:(Element.getStyle(b,"display")=="none"?0:Element.getOpacity(b)||0),to:1,beforeSetup:function(c){Element.setOpacity(c.element,c.options.from);Element.show(c.element)}},arguments[1]||{});return new Effect.Opacity(b,a)};Effect.Puff=function(b){b=$(b);var a=Element.getInlineOpacity(b);var c=b.style.position;return new Effect.Parallel([new Effect.Scale(b,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(b,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(d){d.effects[0].element.style.position="absolute"},afterFinishInternal:function(d){Element.hide(d.effects[0].element);d.effects[0].element.style.position=c;Element.setInlineOpacity(d.effects[0].element,a)}},arguments[1]||{}))};Effect.BlindUp=function(a){a=$(a);Element.makeClipping(a);return new Effect.Scale(a,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(b){Element.hide(b.element);Element.undoClipping(b.element)}},arguments[1]||{}))};Effect.BlindDown=function(b){b=$(b);var c=b.style.height;var a=Element.getDimensions(b);return new Effect.Scale(b,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:a.height,originalWidth:a.width},restoreAfterFinish:true,afterSetup:function(d){Element.makeClipping(d.element);d.element.style.height="0px";Element.show(d.element)},afterFinishInternal:function(d){Element.undoClipping(d.element);d.element.style.height=c}},arguments[1]||{}))};Effect.SwitchOff=function(b){b=$(b);var a=Element.getInlineOpacity(b);return new Effect.Appear(b,{duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(c){new Effect.Scale(c.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(d){Element.makePositioned(d.element);Element.makeClipping(d.element)},afterFinishInternal:function(d){Element.hide(d.element);Element.undoClipping(d.element);Element.undoPositioned(d.element);Element.setInlineOpacity(d.element,a)}})}})};Effect.DropOut=function(c){c=$(c);var a=c.style.top;var d=c.style.left;var b=Element.getInlineOpacity(c);return new Effect.Parallel([new Effect.MoveBy(c,100,0,{sync:true}),new Effect.Opacity(c,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(e){Element.makePositioned(e.effects[0].element)},afterFinishInternal:function(e){Element.hide(e.effects[0].element);Element.undoPositioned(e.effects[0].element);e.effects[0].element.style.left=d;e.effects[0].element.style.top=a;Element.setInlineOpacity(e.effects[0].element,b)}},arguments[1]||{}))};Effect.Shake=function(b){b=$(b);var a=b.style.top;var c=b.style.left;return new Effect.MoveBy(b,0,20,{duration:0.05,afterFinishInternal:function(d){new Effect.MoveBy(d.element,0,-40,{duration:0.1,afterFinishInternal:function(e){new Effect.MoveBy(e.element,0,40,{duration:0.1,afterFinishInternal:function(f){new Effect.MoveBy(f.element,0,-40,{duration:0.1,afterFinishInternal:function(g){new Effect.MoveBy(g.element,0,40,{duration:0.1,afterFinishInternal:function(h){new Effect.MoveBy(h.element,0,-20,{duration:0.05,afterFinishInternal:function(i){Element.undoPositioned(i.element);i.element.style.left=c;i.element.style.top=a}})}})}})}})}})}})};Effect.SlideDown=function(c){c=$(c);Element.cleanWhitespace(c);var a=c.firstChild.style.bottom;var b=Element.getDimensions(c);return new Effect.Scale(c,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:b.height,originalWidth:b.width},restoreAfterFinish:true,afterSetup:function(d){Element.makePositioned(d.element.firstChild);if(window.opera){d.element.firstChild.style.top=""}Element.makeClipping(d.element);c.style.height="0";Element.show(c)},afterUpdateInternal:function(d){d.element.firstChild.style.bottom=(d.originalHeight-d.element.clientHeight)+"px"},afterFinishInternal:function(d){Element.undoClipping(d.element);Element.undoPositioned(d.element.firstChild);d.element.firstChild.style.bottom=a}},arguments[1]||{}))};Effect.SlideUp=function(b){b=$(b);Element.cleanWhitespace(b);var a=b.firstChild.style.bottom;return new Effect.Scale(b,0,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,restoreAfterFinish:true,beforeStartInternal:function(c){Element.makePositioned(c.element.firstChild);if(window.opera){c.element.firstChild.style.top=""}Element.makeClipping(c.element);Element.show(b)},afterUpdateInternal:function(c){c.element.firstChild.style.bottom=(c.originalHeight-c.element.clientHeight)+"px"},afterFinishInternal:function(c){Element.hide(c.element);Element.undoClipping(c.element);Element.undoPositioned(c.element.firstChild);c.element.firstChild.style.bottom=a}},arguments[1]||{}))};Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(b){Element.makeClipping(b.element)},afterFinishInternal:function(b){Element.hide(b.element);Element.undoClipping(b.element)}})};Effect.Grow=function(c){c=$(c);var f=arguments[1]||{};var l=Element.getDimensions(c);var r=l.width;var o=l.height;var b=c.style.top;var g=c.style.left;var i=c.style.height;var m=c.style.width;var a=Element.getInlineOpacity(c);var q=f.direction||"center";var p=f.moveTransition||Effect.Transitions.sinoidal;var h=f.scaleTransition||Effect.Transitions.sinoidal;var j=f.opacityTransition||Effect.Transitions.full;var e,d;var n,k;switch(q){case"top-left":e=d=n=k=0;break;case"top-right":e=r;d=k=0;n=-r;break;case"bottom-left":e=n=0;d=o;k=-o;break;case"bottom-right":e=r;d=o;n=-r;k=-o;break;case"center":e=r/2;d=o/2;n=-r/2;k=-o/2;break}return new Effect.MoveBy(c,d,e,{duration:0.01,beforeSetup:function(s){Element.hide(s.element);Element.makeClipping(s.element);Element.makePositioned(s.element)},afterFinishInternal:function(s){new Effect.Parallel([new Effect.Opacity(s.element,{sync:true,to:1,from:0,transition:j}),new Effect.MoveBy(s.element,k,n,{sync:true,transition:p}),new Effect.Scale(s.element,100,{scaleMode:{originalHeight:o,originalWidth:r},sync:true,scaleFrom:window.opera?1:0,transition:h,restoreAfterFinish:true})],Object.extend({beforeSetup:function(t){t.effects[0].element.style.height=0;Element.show(t.effects[0].element)},afterFinishInternal:function(v){var u=v.effects[0].element;var t=u.style;Element.undoClipping(u);Element.undoPositioned(u);t.top=b;t.left=g;t.height=i;t.width=r;Element.setInlineOpacity(u,a)}},f))}})};Effect.Shrink=function(j){j=$(j);var o=arguments[1]||{};var c=j.clientWidth;var i=j.clientHeight;var g=j.style.top;var f=j.style.left;var m=j.style.height;var h=j.style.width;var k=Element.getInlineOpacity(j);var l=o.direction||"center";var b=o.moveTransition||Effect.Transitions.sinoidal;var a=o.scaleTransition||Effect.Transitions.sinoidal;var n=o.opacityTransition||Effect.Transitions.none;var e,d;switch(l){case"top-left":e=d=0;break;case"top-right":e=c;d=0;break;case"bottom-left":e=0;d=i;break;case"bottom-right":e=c;d=i;break;case"center":e=c/2;d=i/2;break}return new Effect.Parallel([new Effect.Opacity(j,{sync:true,to:0,from:1,transition:n}),new Effect.Scale(j,window.opera?1:0,{sync:true,transition:a,restoreAfterFinish:true}),new Effect.MoveBy(j,d,e,{sync:true,transition:b})],Object.extend({beforeStartInternal:function(p){Element.makePositioned(p.effects[0].element);Element.makeClipping(p.effects[0].element)},afterFinishInternal:function(r){var q=r.effects[0].element;var p=q.style;Element.hide(q);Element.undoClipping(q);Element.undoPositioned(q);p.top=g;p.left=f;p.height=m;p.width=h;Element.setInlineOpacity(q,k)}},o))};Effect.Pulsate=function(c){c=$(c);var b=arguments[1]||{};var a=Element.getInlineOpacity(c);var e=b.transition||Effect.Transitions.sinoidal;var d=function(f){return e(1-Effect.Transitions.pulse(f))};d.bind(e);return new Effect.Opacity(c,Object.extend(Object.extend({duration:3,from:0,afterFinishInternal:function(f){Element.setInlineOpacity(f.element,a)}},b),{transition:d}))};Effect.Fold=function(a){a=$(a);var e=a.style.top;var c=a.style.left;var d=a.style.width;var b=a.style.height;Element.makeClipping(a);return new Effect.Scale(a,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(f){new Effect.Scale(a,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(g){Element.hide(g.element);Element.undoClipping(g.element);g.element.style.top=e;g.element.style.left=c;g.element.style.width=d;g.element.style.height=b}})}},arguments[1]||{}))};