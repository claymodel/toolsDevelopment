Object.debug=function(b){var a=[];if(typeof b in ["string","number"]){return b}else{for(property in b){if(typeof b[property]!="function"){a.push(property+" => "+(typeof b[property]=="string"?'"'+b[property]+'"':b[property]))}}}return("'"+b+"' #"+typeof b+": {"+a.join(", ")+"}")};String.prototype.toArray=function(){var b=[];for(var a=0;a<this.length;a++){b.push(this.charAt(a))}return b};var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(a){a=a.toUpperCase();var e=this.NODEMAP[a]||"div";var b=document.createElement(e);b.innerHTML="<"+a+"></"+a+">";var d=b.firstChild||null;if(d&&(d.tagName!=a)){d=d.getElementsByTagName(a)[0]}if(!d){d=document.createElement(a)}if(!d){return}if(arguments[1]){if(this._isStringOrNumber(arguments[1])||(arguments[1] instanceof Array)){this._children(d,arguments[1])}else{var c=this._attributes(arguments[1]);if(c.length){b.innerHTML="<"+a+" "+c+"></"+a+">";d=b.firstChild||null;if(!d){d=document.createElement(a);for(attr in arguments[1]){d[attr=="class"?"className":attr]=arguments[1][attr]}}if(d.tagName!=a){d=b.getElementsByTagName(a)[0]}}}}if(arguments[2]){this._children(d,arguments[2])}return d},_text:function(a){return document.createTextNode(a)},_attributes:function(a){var b=[];for(attribute in a){b.push((attribute=="className"?"class":attribute)+'="'+a[attribute].toString().escapeHTML()+'"')}return b.join(" ")},_children:function(b,a){if(typeof a=="object"){a.flatten().each(function(c){if(typeof c=="object"){b.appendChild(c)}else{if(Builder._isStringOrNumber(c)){b.appendChild(Builder._text(c))}}})}else{if(Builder._isStringOrNumber(a)){b.appendChild(Builder._text(a))}}},_isStringOrNumber:function(a){return(typeof a=="string"||typeof a=="number")}};String.prototype.camelize=function(){var d=this.split("-");if(d.length==1){return d[0]}var b=this.indexOf("-")==0?d[0].charAt(0).toUpperCase()+d[0].substring(1):d[0];for(var c=1,a=d.length;c<a;c++){var e=d[c];b+=e.charAt(0).toUpperCase()+e.substring(1)}return b};Element.getStyle=function(b,c){b=$(b);var d=b.style[c.camelize()];if(!d){if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(b,null);d=(a!=null)?a.getPropertyValue(c):null}else{if(b.currentStyle){d=b.currentStyle[c.camelize()]}}}if(window.opera&&(c=="left"||c=="top"||c=="right"||c=="bottom")){if(Element.getStyle(b,"position")=="static"){d="auto"}}if(d=="auto"){d=null}return d};String.prototype.parseColor=function(){color="#";if(this.slice(0,4)=="rgb("){var b=this.slice(4,this.length-1).split(",");var a=0;do{color+=parseInt(b[a]).toColorPart()}while(++a<3)}else{if(this.slice(0,1)=="#"){if(this.length==4){for(var a=1;a<4;a++){color+=(this.charAt(a)+this.charAt(a)).toLowerCase()}}if(this.length==7){color=this.toLowerCase()}}}return(color.length==7?color:(arguments[0]||this))};Element.makePositioned=function(a){a=$(a);var b=Element.getStyle(a,"position");if(b=="static"||!b){a._madePositioned=true;a.style.position="relative";if(window.opera){a.style.top=0;a.style.left=0}}};Element.undoPositioned=function(a){a=$(a);if(typeof a._madePositioned!="undefined"){a._madePositioned=undefined;a.style.position="";a.style.top="";a.style.left="";a.style.bottom="";a.style.right=""}};Element.makeClipping=function(a){a=$(a);if(typeof a._overflow!="undefined"){return}a._overflow=a.style.overflow;if((Element.getStyle(a,"overflow")||"visible")!="hidden"){a.style.overflow="hidden"}};Element.undoClipping=function(a){a=$(a);if(typeof a._overflow=="undefined"){return}a.style.overflow=a._overflow;a._overflow=undefined};Element.collectTextNodesIgnoreClass=function(d,e){var c=$(d).childNodes;var f="";var b=new RegExp("^([^ ]+ )*"+e+"( [^ ]+)*$","i");for(var a=0;a<c.length;a++){if(c[a].nodeType==3){f+=c[a].nodeValue}else{if((!c[a].className.match(b))&&c[a].hasChildNodes()){f+=Element.collectTextNodesIgnoreClass(c[a],e)}}}return f};Element.setContentZoom=function(a,b){a=$(a);a.style.fontSize=(b/100)+"em";if(navigator.appVersion.indexOf("AppleWebKit")>0){window.scrollBy(0,0)}};Element.getOpacity=function(b){var a;if(a=Element.getStyle(b,"opacity")){return parseFloat(a)}if(a=(Element.getStyle(b,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(a[1]){return parseFloat(a[1])/100}}return 1};Element.setOpacity=function(b,c){b=$(b);var a=b.style;if(c==1){a.opacity="0.999999";if(/MSIE/.test(navigator.userAgent)){a.filter=Element.getStyle(b,"filter").replace(/alpha\([^\)]*\)/gi,"")}}else{if(c<0.00001){c=0}a.opacity=c;if(/MSIE/.test(navigator.userAgent)){a.filter=Element.getStyle(b,"filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+c*100+")"}}};Element.getInlineOpacity=function(a){a=$(a);var b;b=a.style.opacity;if(typeof b!="undefined"&&b!=""){return b}return""};Element.setInlineOpacity=function(b,c){b=$(b);var a=b.style;a.opacity=c};Element.getDimensions=function(b){b=$(b);if(Element.getStyle(b,"display")=="none"){var a=b.style;var e=a.visibility;var c=a.position;a.visibility="hidden";a.position="absolute";a.display="";var f=b.clientWidth;var d=b.clientHeight;a.display="none";a.position=c;a.visibility=e;return{width:f,height:d}}return{width:b.offsetWidth,height:b.offsetHeight}};Position.positionedOffset=function(b){var a=0,c=0;do{a+=b.offsetTop||0;c+=b.offsetLeft||0;b=b.offsetParent;if(b){p=Element.getStyle(b,"position");if(p=="relative"||p=="absolute"){break}}}while(b);return[c,a]};if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){Position.cumulativeOffset=function(b){var a=0,c=0;do{a+=b.offsetTop||0;c+=b.offsetLeft||0;if(b.offsetParent==document.body){if(Element.getStyle(b,"position")=="absolute"){break}}b=b.offsetParent}while(b);return[c,a]}}Position.page=function(d){var a=0,c=0;var b=d;do{a+=b.offsetTop||0;c+=b.offsetLeft||0;if(b.offsetParent==document.body){if(Element.getStyle(b,"position")=="absolute"){break}}}while(b=b.offsetParent);b=d;do{a-=b.scrollTop||0;c-=b.scrollLeft||0}while(b=b.parentNode);return[c,a]};Position.offsetParent=function(a){if(a.offsetParent){return a.offsetParent}if(a==document.body){return a}while((a=a.parentNode)&&a!=document.body){if(Element.getStyle(a,"position")!="static"){return a}}return document.body};Position.clone=function(c,e){var a=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});c=$(c);var d=Position.page(c);e=$(e);var f=[0,0];var b=null;if(Element.getStyle(e,"position")=="absolute"){b=Position.offsetParent(e);f=Position.page(b)}if(b==document.body){f[0]-=document.body.offsetLeft;f[1]-=document.body.offsetTop}if(a.setLeft){e.style.left=(d[0]-f[0]+a.offsetLeft)+"px"}if(a.setTop){e.style.top=(d[1]-f[1]+a.offsetTop)+"px"}if(a.setWidth){e.style.width=c.offsetWidth+"px"}if(a.setHeight){e.style.height=c.offsetHeight+"px"}};Position.absolutize=function(b){b=$(b);if(b.style.position=="absolute"){return}Position.prepare();var d=Position.positionedOffset(b);var f=d[1];var e=d[0];var c=b.clientWidth;var a=b.clientHeight;b._originalLeft=e-parseFloat(b.style.left||0);b._originalTop=f-parseFloat(b.style.top||0);b._originalWidth=b.style.width;b._originalHeight=b.style.height;b.style.position="absolute";b.style.top=f+"px";b.style.left=e+"px";b.style.width=c+"px";b.style.height=a+"px"};Position.relativize=function(a){a=$(a);if(a.style.position=="relative"){return}Position.prepare();a.style.position="relative";var c=parseFloat(a.style.top||0)-(a._originalTop||0);var b=parseFloat(a.style.left||0)-(a._originalLeft||0);a.style.top=c+"px";a.style.left=b+"px";a.style.height=a._originalHeight;a.style.width=a._originalWidth};Element.Class={toggle:function(a,b){if(Element.Class.has(a,b)){Element.Class.remove(a,b);if(arguments.length==3){Element.Class.add(a,arguments[2])}}else{Element.Class.add(a,b);if(arguments.length==3){Element.Class.remove(a,arguments[2])}}},get:function(a){return $(a).className.split(" ")},remove:function(b){b=$(b);var a=arguments;$R(1,arguments.length-1).each(function(c){b.className=b.className.split(" ").reject(function(d){return(d==a[c])}).join(" ")})},add:function(b){b=$(b);for(var a=1;a<arguments.length;a++){Element.Class.remove(b,arguments[a]);b.className+=(b.className.length>0?" ":"")+arguments[a]}},has:function(c){c=$(c);if(!c||!c.className){return false}var d;for(var b=1;b<arguments.length;b++){if((typeof arguments[b]=="object")&&(arguments[b].constructor==Array)){for(var a=0;a<arguments[b].length;a++){d=new RegExp("(^|\\s)"+arguments[b][a]+"(\\s|$)");if(!d.test(c.className)){return false}}}else{d=new RegExp("(^|\\s)"+arguments[b]+"(\\s|$)");if(!d.test(c.className)){return false}}}return true},has_any:function(c){c=$(c);if(!c||!c.className){return false}var d;for(var b=1;b<arguments.length;b++){if((typeof arguments[b]=="object")&&(arguments[b].constructor==Array)){for(var a=0;a<arguments[b].length;a++){d=new RegExp("(^|\\s)"+arguments[b][a]+"(\\s|$)");if(d.test(c.className)){return true}}}else{d=new RegExp("(^|\\s)"+arguments[b]+"(\\s|$)");if(d.test(c.className)){return true}}}return false},childrenWith:function(c,d){var b=$(c).getElementsByTagName("*");var e=new Array();for(var a=0;a<b.length;a++){if(Element.Class.has(b[a],d)){e.push(b[a])}}return e}};