(function(a){a.fn.quicksearch=function(f,i,e){if(i){e.onShow=i}e.makeParams=e.makeParams||function(j){return{query:j}};var c=function(l){var m=l.statusMessage;var k;if(m){k=[[{html:l.statusMessage,className:"error"}]]}else{if(e.makeRestMatrixFromData){var j=e.makeRestMatrixFromData(l);k=AJS.REST.convertFromRest(j);if(e.addDropdownData){k=e.addDropdownData(k)}}else{k=l.contentNameMatches}}return k};var d,h;if(typeof f=="function"){h=f(),d=function(k){var j=f();if(j!=h){h=j;k.clearCache()}return j}}else{d=function(){return f}}e.getDataAndRunCallback=e.getDataAndRunCallback||function(m,n){var l=this,k=d(l,m),j=AJS.Data.get("context-path")||"";AJS.$.ajax({type:"GET",dataType:"json",url:j+k,data:e.makeParams(m),success:function(p,q){a(window).trigger("quicksearch.ajax-success",{url:k,json:p,resultStatus:q});var o=c(p);n.call(l,o,m,p.queryTokens)},global:false,timeout:5000,error:function(r,p,q){a(window).trigger("quicksearch.ajax-error",{url:k,xmlHttpRequest:r,resultStatus:p,errorThrown:q});if(p=="timeout"){var o=c({statusMessage:"Timeout",query:m});n.call(l,o,null)}}})};var g=AJS.inputDrivenDropdown(e),b=a(this);b.keyup(function(j){if(j.which==13||j.which==9){return}!b.hasClass("placeholded")&&g.change(this.value)});b.quickSearchControl=g;return b}})(jQuery);