AJS.Confluence.Binder.userHover=(function(){var e=[],b=AJS.Confluence.getContextPath(),d=AJS.$;var a=function(h){var g=e[h],f={username:g,target:this};d(self).trigger("hover-user.open",f);d(".ajs-menu-bar",this).ajsMenu();d(".follow-icon, .unfollow-icon",this).each(function(){var i=d(this).click(function(k){if(i.hasClass("waiting")){return}var j=i.hasClass("unfollow-icon")?"/unfollowuser.action":"/followuser.action";i.addClass("waiting");AJS.safe.post(b+j+"?username="+g+"&mode=blank",function(){i.removeClass("waiting");i.parent().toggleClass("follow-item").toggleClass("unfollow-item");d(self).trigger("hover-user.follow",f)});return AJS.stopEvent(k)})})};var c=["span.user-hover-trigger","a.confluence-userlink","img.confluence-userlink","a.userLogoLink"].join(", ");return function(){d(c).filter("[data-user-hover-bound!=true]").each(function(){var g=d(this),h=g.attr("data-username");g.attr("title","").attr("data-user-hover-bound","true");d("img",g).attr("title","");var f=d.inArray(h,e);if(f==-1){e.push(h);f=d.inArray(h,e)}d(this).addClass("userlink-"+f)});d.each(e,function(f){AJS.contentHover(d(".userlink-"+f),f,b+"/users/userinfopopup.action?username="+e[f],a)})}})();